CREATE SEQUENCE trip_bills_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE trip_bonuses_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE TABLE trip_bills (id INT NOT NULL, trip_id INT DEFAULT NULL, minutes INT NOT NULL, cost INT NOT NULL, timestamp_beginning TIMESTAMP(0) WITH TIME ZONE NOT NULL, timestamp_end TIMESTAMP(0) WITH TIME ZONE NOT NULL, notes TEXT DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_F83CDD93A5BC2E0E ON trip_bills (trip_id);
CREATE TABLE trip_bonuses (id INT NOT NULL, trip_id INT DEFAULT NULL, bonus_id INT DEFAULT NULL, minutes INT NOT NULL, timestamp_beginning TIMESTAMP(0) WITH TIME ZONE NOT NULL, 
timestamp_end TIMESTAMP(0) WITH TIME ZONE NOT NULL, notes TEXT DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_B3D98A7FA5BC2E0E ON trip_bonuses (trip_id);
CREATE INDEX IDX_B3D98A7F69545666 ON trip_bonuses (bonus_id);
ALTER TABLE trip_bills ADD CONSTRAINT FK_F83CDD93A5BC2E0E FOREIGN KEY (trip_id) REFERENCES trips (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE trip_bonuses ADD CONSTRAINT FK_B3D98A7FA5BC2E0E FOREIGN KEY (trip_id) REFERENCES trips (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE trip_bonuses ADD CONSTRAINT FK_B3D98A7F69545666 FOREIGN KEY (bonus_id) REFERENCES customers_bonus (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE trips ADD is_accounted BOOLEAN DEFAULT 'false' NOT NULL;
