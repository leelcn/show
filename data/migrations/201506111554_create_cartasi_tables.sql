CREATE SEQUENCE transactions_id_seq INCREMENT BY 1 MINVALUE 10000 START 10000;
CREATE SEQUENCE contracts_id_seq INCREMENT BY 1 MINVALUE 10000 START 10000;
CREATE TABLE transactions (id INT NOT NULL, contract_id INT DEFAULT NULL, amount INT NOT NULL, currency VARCHAR(3) NOT NULL, email VARCHAR(255) DEFAULT NULL, name VARCHAR(255) DEFAULT NULL, surname VARCHAR(255) DEFAULT NULL, brand VARCHAR(255) DEFAULT NULL, outcome TEXT DEFAULT NULL, datetime TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, cod_aut VARCHAR(255) DEFAULT NULL, region VARCHAR(255) DEFAULT NULL, country VARCHAR(255) DEFAULT NULL, message VARCHAR(255) DEFAULT NULL, hash VARCHAR(255) DEFAULT NULL, "check" VARCHAR(255) DEFAULT NULL, convention_code VARCHAR(255) DEFAULT NULL, transaction_type VARCHAR(255) DEFAULT NULL, product_type VARCHAR(255) DEFAULT NULL, first_transaction BOOLEAN NOT NULL, inserted_ts TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_EAA81A4C2576E0FD ON transactions (contract_id);
CREATE TABLE contracts (id INT NOT NULL, customer_id INT DEFAULT NULL, pan VARCHAR(19) DEFAULT NULL, pan_expiry VARCHAR(6) DEFAULT NULL, inserted_ts TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_950A9739395C3F3 ON contracts (customer_id);
ALTER TABLE transactions ADD CONSTRAINT FK_EAA81A4C2576E0FD FOREIGN KEY (contract_id) REFERENCES contracts (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE contracts ADD CONSTRAINT FK_950A9739395C3F3 FOREIGN KEY (customer_id) REFERENCES customers (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
