CREATE SEQUENCE customersbonus_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE promocodes_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE promocodesinfo_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE TABLE customers_bonus (id INT NOT NULL, customer_id INT NOT NULL, webuser_id INT DEFAULT NULL, active BOOLEAN NOT NULL, insert_ts TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, update_ts TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, total INT NOT NULL, residual INT NOT NULL, type VARCHAR(100) NOT NULL, operator VARCHAR(100) DEFAULT NULL, valid_from TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, duration_days INT DEFAULT NULL, valid_to TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, description TEXT DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_AC781C5F9395C3F3 ON customers_bonus (customer_id);
CREATE INDEX IDX_AC781C5F49279951 ON customers_bonus (webuser_id);
CREATE TABLE promo_codes (id INT NOT NULL, promocodesinfo_id INT DEFAULT NULL, promocode VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_C84FDDB41AFEBC1 ON promo_codes (promocodesinfo_id);
CREATE TABLE promo_codes_info (id INT NOT NULL, webuser_id INT DEFAULT NULL, active BOOLEAN NOT NULL, insert_ts TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, type VARCHAR(100) NOT NULL, minutes INT NOT NULL, valid_from TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, duration_days INT DEFAULT NULL, valid_to TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_560C3D2E49279951 ON promo_codes_info (webuser_id);
ALTER TABLE customers_bonus ADD CONSTRAINT FK_AC781C5F9395C3F3 FOREIGN KEY (customer_id) REFERENCES customers (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE customers_bonus ADD CONSTRAINT FK_AC781C5F49279951 FOREIGN KEY (webuser_id) REFERENCES webuser (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE promo_codes ADD CONSTRAINT FK_C84FDDB41AFEBC1 FOREIGN KEY (promocodesinfo_id) REFERENCES promo_codes_info (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE promo_codes_info ADD CONSTRAINT FK_560C3D2E49279951 FOREIGN KEY (webuser_id) REFERENCES webuser (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
